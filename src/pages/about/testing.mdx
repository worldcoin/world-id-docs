import { Callout } from 'common/Callout'

# Testing

<Callout title="Tip">
  Access the Worldcoin simulator at
  [https://simulator.worldcoin.org][simulator], the easiest way to test World ID
  in the **Staging network**.
</Callout>

To make it easy to test the World ID flow end-to-end, we have a **Staging network** which doesn't require physically going to an orb to do the identity verification process. The staging network can be accessed through the [Worldcoin Simulator][simulator] (open sourced on [GitHub](https://github.com/worldcoin/simulator)).

If you have verified your identity at an orb, you can also test in **Production mode** through the [Worldcoin app](https://worldcoin.org/download) which you can download from the App Store or Google Play respectively.

<Callout title="Tip">
  Whenever testing in the **Staging network** you will **always have to use the
  [Worldcoin Simulator][simulator]**, regardless of whether you are using World
  ID on cloud or on-chain.
</Callout>

## Using the Staging network

Using the staging network as a "user" is simple, just go to the [Simulator][simulator],

1. Create or load a staging identity.
2. Add your identity to the list of "verified identities" with the faucet.
3. Scan or paste a QR code generated by the widget.

How you connect to the staging network to **verify proofs** depends on whether you are running your actions on-chain or on cloud (see [Quick start](/quick-start) for details).

### Verifying proofs

{/* FIXME: add tabs component */}
{/* <Tabs>

  <TabItem value="cloud" label="☁️ Cloud actions">
   <b>If your action is running on Cloud</b> (through the [Developer Portal](https://developer.worldcoin.org), you <b>don't have to do anything additional</b> to use the Staging network. When you create an action you select whether you want to run it in Staging or Production mode and the Developer Portal will do the proper validation automatically for you.
  </TabItem>
  <TabItem value="on-chain" label="⛓ On-chain actions" default>
    If you are running your action on-chain, you do need to point your smart contract to the relevant World ID smart contract. Further, the Staging and Production smart contracts are deployed to different chains. Be sure to <b>check the Developer Portal for the most up-to-date information on which chain to use.</b>

To use the <b>Staging network</b> follow these steps:

<ol>
  <li>
    Make sure to deploy your contract in the [Polygon
    Mumbai-Testnet](https://docs.polygon.technology/docs/develop/network-details/network/).
  </li>
  <li>
    Obtain the World ID contract address from your [Developer
    Portal](https://developer.worldcoin.org) and point it in your smart
    contract. Check the [starter
    kit](https://github.com/worldcoin/world-id-starter) for details.
    <ul>
      <li>
        Alternatively, you can query <code>staging.semaphore.wld.eth</code> to
        obtain the address of the World ID contract (you will have to do this
        manually as there's no ENS on Polygon).
      </li>
    </ul>
  </li>
  <li>
    When interacting with your smart contract remember to connect your wallet to
    the <b>Polygon Mumbai-Testnet.</b>
  </li>
</ol>

<details>
  <summary>How to to connect your wallet to Polygon Mumbai-Testnet</summary>
  <div>
    To connect your wallet to the Polygon Mumbai-Testnet, we recommend using a
    [MetaMask](https://metamask.io) wallet (either mobile or desktop) and
    configuring as follows (both mobile and desktop work fine):
    <ol>
      <li>Go to Settings -> Networks.</li>
      <li>
        Click on "Add network" and set the following parameters.
        <ul>
          <li>
            Network Name: <b>Matic Mumbai</b>
          </li>
          <li>
            RPC URL: <code>https://rpc-mumbai.maticvigil.com</code> or{' '}
            <code>https://rpc-mumbai.matic.today</code> or{' '}
            <code>https://matic-mumbai.chainstacklabs.com</code>
          </li>
          <li>
            Chain ID: <code>80001</code>
          </li>
          <li>
            Symbol: <code>MATIC</code>
          </li>
          <li>
            Block explorer URL: <code>https://mumbai.polygonscan.com/</code>
          </li>
        </ul>
      </li>
      <li>
        After adding your network and switching to it, copy the wallet address.
      </li>
      <li>
        Go to a Mumbai Faucet, for example
        [https://faucet.polygon.technology](https://faucet.polygon.technology)
        and get some <code>MATIC</code> on your wallet.
      </li>
      <li>
        Done! You can now use the Staging network. To test an example, check out
        the [Mesha Airdrop](https://example.id.worldcoin.org).
      </li>
    </ol>
  </div>
</details>

  </TabItem>
</Tabs> */}

### About identity generation

When you use the simulator you are required to generate or load a World ID identity first. You can either generate a temporary identity which is stored on `localStorage` and persisted until you log out or clear your browser storage, or generate an identity with any ETH wallet for stronger persistence.

When you generate an identity with an external wallet, we use your wallet to generate the seed entropy for your identity (through a signature request). This means, if you ever use the same wallet again on the simulator, the same World ID identity will be fetched, which can help with persistence and working across devices. **Your wallet's address or private key are never exposed to the simulator.**

## Advanced

<Callout title="Danger" type="warning">
  The information in this section is currently intended only for internal use by
  the Core Team.
</Callout>

- The **Staging sequencer** (used to submit _verified identities_ to the staging Semaphore contract and obtain Merkle proof information) can be found at `https://signup.stage-crypto.worldcoin.dev` and uses a `Basic` authorization token.
- The **Staging World ID smart contract** (also called the _Staging Semaphore instance_) is hosted on the **Polygon Mumbai network** and the contract address can be found at: `staging.semaphore.wld.eth`. Always do an ENS lookup for the most up-to-date information.

[simulator]: https://simulator.worldcoin.org
