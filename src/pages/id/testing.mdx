import { Callout } from 'common/Callout'
import { Tabs } from 'common/Tabs'
import { TabItem } from 'common/Tabs/TabItem'

# Testing

To develop and test with World ID, you can set up **staging** apps. Staging apps use the protocol's staging network. This network is intended to aid with development, and it provides more flexibility to create new identities, issue credentials and try different edge cases.

The staging network uses a separate infrastructure and has the following key characteristics:

- Identities and credentials are managed in the [Simulator](https://simulator.worldcoin.org). The Simulator is used instead of the World App or other clients.
- Proofs can be verified in the Developer Portal (all endpoints are the same as production).
- For on-chain verifications, the World ID smart contract is deployed to the Polygon Mumbai-Testnet.

<Callout type="note">
  Access the Worldcoin simulator at [https://simulator.worldcoin.org][simulator]
  to generate test identities and credentials.
</Callout>

## Using the Staging network

Using the staging network as an _end user_ is simple, just go to the [Simulator][simulator],

1. Create or load a staging identity. _If you connect any wallet, a signature from the wallet will be used to generate your identity, which means you can always get that identity back._
2. Get your Orb credential by verifying your identity within the Simulator.
3. Scan or paste a QR code generated by the widget.

### Verifying proofs

<Tabs>
  <TabItem value="cloud" label="☁️ Cloud actions">
   <b>If your action is running on Cloud</b>, you <b>don't have to do anything different</b> when using the staging network. When you create an action you select whether you want to run it in staging or production mode and the Developer Portal will do the proper validation automatically for you.
  </TabItem>
  <TabItem value="on-chain" label="⛓ On-chain actions" default>
    If you are running your action on-chain, you do need to point your smart contract to the relevant staging World ID smart contract. Further, the Staging and Production smart contracts are deployed to different chains. Follow these guidelines:

<ol>
  <li>
    Make sure to deploy your contract in the [Polygon
    Mumbai-Testnet](https://docs.polygon.technology/docs/develop/network-details/network/).
  </li>
  <li>
    Obtain the World ID contract address from ENS. The smart contract with the
    staging Orb credential can be found at: `staging.semaphore.wld.eth` and
    point it in your smart contract. Check the [smart contract starter
    kit](https://github.com/worldcoin/world-id-starter) for details.
    <ul>
      <li>
        You will have to do the address resolving manually or with a deploy
        script as there's no ENS on Polygon yet.
      </li>
    </ul>
  </li>
  <li>
    When interacting with your smart contract remember to connect your wallet to
    the <b>Polygon Mumbai-Testnet.</b>
  </li>
</ol>

  </TabItem>
</Tabs>

### About identity generation

When you use the simulator you are required to generate or load a World ID identity first. You can either generate a temporary identity which is stored on `localStorage` and persisted until you log out or clear your browser storage, or generate an identity with any ETH wallet for stronger persistence.

When you generate an identity with an external wallet, we use a signature from your wallet to generate the seed entropy for your identity. This means, if you ever use the same wallet again on the simulator, the same World ID identity will be generated, which can help with persistence and working across devices. **Your wallet's private key is never exposed to the simulator.**

<Callout type="tip">
  If you don't have a verified World ID yet, the staging network is a great way
  to try things out. test.
</Callout>

## Advanced

<Callout type="danger">
  The information in this section is currently intended only for **internal**
  use by core contributors.
</Callout>

The **staging sequencer** (used to submit _verified identities_ to the staging Semaphore contract and obtain Merkle proof information) uses a `Basic` authorization token, and can be found at:

- `https://signup.stage-crypto.worldcoin.dev` for Orb credentials
- `https://phone-signup.stage-crypto.worldcoin.dev` for phone credentials

The **staging World ID smart contract** (also called the _Staging Semaphore instance_) is hosted on the **Polygon Mumbai-Testnet network** and the contract address can be found at:

- `staging.semaphore.wld.eth` for Orb credentials
- `staging.phone.wld.eth` for phone credentials

Always do an ENS lookup for the most up-to-date information.

[simulator]: https://simulator.worldcoin.org
